(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3059d927"],{7028:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"d",(function(){return r})),a.d(t,"c",(function(){return l})),a.d(t,"b",(function(){return o}));var i=a("b775");function n(e){return Object(i["a"])({url:"/check/image",method:"post",data:e})}function r(e){return Object(i["a"])({url:"/common/upload",method:"post",data:e})}function l(e){return Object(i["a"])({url:"/record/image",method:"post",data:e})}function o(e){return Object(i["a"])({url:"/record/image/"+e,method:"delete"})}},"74b9":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"article-page"},[a("div",{staticStyle:{display:"flex","align-items":"center","margin-top":"1.5%","margin-left":"1%"}},[a("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",accept:".png,.jpg"},on:{change:function(t){return e.handleFileChange(t)}}}),a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.triggerFileUpload}},[e._v("选择图片")]),a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(e.selectedFileName))]),a("el-button",{staticStyle:{"margin-left":"15%"},attrs:{size:"medium",type:"success",loading:e.loading},on:{click:e.handleUpload}},[e._v("开始检测")]),a("el-button",{staticStyle:{"margin-left":"5%"},attrs:{size:"medium",type:"info"},on:{click:e.goToRecordImage}},[e._v("历史记录")])],1),a("el-divider"),e.fileToUpload?a("div",{staticClass:"result"},[e.imageUrl?a("div",{staticClass:"image-preview"},[a("span",[e._v("待检测图片：")]),a("img",{staticStyle:{display:"block","margin-left":"10px","margin-top":"20px",width:"50%"},attrs:{src:e.imageUrl,alt:"Image preview"}})]):e._e(),e.detectionResult?a("div",{staticClass:"image-preview"},[a("el-divider"),a("h3",{staticStyle:{"font-size":"x-large"}},[e._v("检测结果：")]),a("li",[a("span",{staticStyle:{"font-size":"larger"}},[e._v("AI合成概率："+e._s(e.detectionResult.ai_prob)+"%")])])],1):e._e()]):e._e()],1)},n=[],r=a("c7eb"),l=a("1da1"),o=(a("14d9"),a("b0c0"),a("d3b7"),a("ac1f"),a("00b4"),a("3ca3"),a("ddb0"),a("2b3d"),a("bf19"),a("9861"),a("7028")),c={data:function(){return{loading:!1,flag:!1,selectedFileName:"未选择图片",fileToUpload:"",imageUrl:"",detectionResult:""}},components:{},methods:{goToRecordImage:function(){this.$router.push("/record/photo")},triggerFileUpload:function(){this.$refs.fileInput.click()},handleFileChange:function(e){var t=e.target.files[0];t&&(this.fileToUpload=t,this.flag=!1,this.selectedFileName=t.name,this.imageUrl=URL.createObjectURL(t))},handleUpload:function(){var e=this;return Object(l["a"])(Object(r["a"])().mark((function t(){var a,i,n,l,c,s;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=5242880,i=/(\.png|\.jpg)$/i,!(e.fileToUpload.size>a)){t.next=5;break}return e.$message.error("图片大小不能超过5MB"),t.abrupt("return");case 5:if(i.test(e.fileToUpload.name)){t.next=8;break}return e.$message.error("只能上传图片"),t.abrupt("return");case 8:if(!e.fileToUpload){t.next=31;break}return n=new FormData,n.append("file",e.fileToUpload),e.loading=!0,t.prev=12,t.next=15,Object(o["d"])(n);case 15:return l=t.sent,c={fileName:l.fileName,newFileName:l.newFileName,url:l.url,originalFilename:l.originalFilename,type:e.fileToUpload.name.substring(e.fileToUpload.name.lastIndexOf(".")+1)},t.next=19,Object(o["a"])(c);case 19:s=t.sent,e.detectionResult=s.data,e.flag=!0,t.next=28;break;case 24:t.prev=24,t.t0=t["catch"](12),console.error("上传失败：",t.t0),e.$message.error("上传失败");case 28:e.loading=!1,t.next=32;break;case 31:e.$message.error("请先选择一个文件。");case 32:case"end":return t.stop()}}),t,null,[[12,24]])})))()},open:function(){var e=this.$createElement;this.$notify({title:"提示",message:e("i",{style:"color: teal"},"该功能用于检测图片由AI生成的概率,可以提交PNG、JPG格式图片检测，限制文件大小5MB"),offset:50})}},mounted:function(){this.open()}},s=c,d=(a("c4b9"),a("2877")),u=Object(d["a"])(s,i,n,!1,null,"d307b78c",null);t["default"]=u.exports},c090:function(e,t,a){},c4b9:function(e,t,a){"use strict";a("c090")}}]);