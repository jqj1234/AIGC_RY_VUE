(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d66b624"],{"81a6":function(e,t,a){},ba25:function(e,t,a){"use strict";a("81a6")},ee3d:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"article-page"},[a("div",{staticStyle:{display:"flex","align-items":"center","margin-top":"1.5%","margin-left":"1%"}},[a("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",accept:".png,.jpg"},on:{change:function(t){return e.handleFileChange(t)}}}),a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.triggerFileUpload}},[e._v("选择图片")]),a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(e.selectedFileName))]),a("el-button",{staticStyle:{"margin-left":"10%"},attrs:{size:"medium",type:"success",loading:e.loading},on:{click:e.handleUpload}},[e._v("开始提取")])],1),a("el-divider"),e.fileToUpload?a("div",{staticClass:"result"},[e.imageUrl?a("div",{staticClass:"image-preview"},[a("span",[e._v("待提取图片：")]),a("img",{staticStyle:{display:"block","margin-left":"10px","margin-top":"20px",width:"50%"},attrs:{src:e.imageUrl,alt:"Image preview"}})]):e._e(),e.detectionResult?a("div",{staticClass:"image-preview"},[a("el-divider"),a("h3",{staticStyle:{"font-size":"x-large"}},[e._v("检测结果：")]),a("li",[a("span",{staticStyle:{"font-size":"larger"}},[e._v("文本内容："+e._s(e.detectionResult)+"%")])])],1):e._e()]):e._e()],1)},n=[],l=a("c7eb"),r=a("1da1"),s=(a("b0c0"),a("d3b7"),a("ac1f"),a("00b4"),a("3ca3"),a("ddb0"),a("2b3d"),a("bf19"),a("9861"),a("b775"));function o(e){return Object(s["a"])({url:"/check/ocr",method:"post",data:e})}function c(e){return Object(s["a"])({url:"/common/upload",method:"post",data:e})}var d={data:function(){return{loading:!1,flag:!1,selectedFileName:"未选择图片",fileToUpload:"",imageUrl:"",detectionResult:""}},components:{},methods:{triggerFileUpload:function(){this.$refs.fileInput.click()},handleFileChange:function(e){var t=e.target.files[0];t&&(this.fileToUpload=t,this.flag=!1,this.selectedFileName=t.name,this.imageUrl=URL.createObjectURL(t))},handleUpload:function(){var e=this;return Object(r["a"])(Object(l["a"])().mark((function t(){var a,i,n,r,s,d;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=5242880,i=/(\.png|\.jpg)$/i,!(e.fileToUpload.size>a)){t.next=5;break}return e.$message.error("图片大小不能超过5MB"),t.abrupt("return");case 5:if(i.test(e.fileToUpload.name)){t.next=8;break}return e.$message.error("只能上传图片"),t.abrupt("return");case 8:if(!e.fileToUpload){t.next=31;break}return n=new FormData,n.append("file",e.fileToUpload),e.loading=!0,t.prev=12,t.next=15,c(n);case 15:return r=t.sent,s={fileName:r.fileName,newFileName:r.newFileName,url:r.url,originalFilename:r.originalFilename,type:e.fileToUpload.name.substring(e.fileToUpload.name.lastIndexOf(".")+1)},t.next=19,o(s);case 19:d=t.sent,e.detectionResult=d.msg,e.flag=!0,t.next=28;break;case 24:t.prev=24,t.t0=t["catch"](12),console.error("上传失败：",t.t0),e.$message.error("上传失败");case 28:e.loading=!1,t.next=32;break;case 31:e.$message.error("请先选择一个文件。");case 32:case"end":return t.stop()}}),t,null,[[12,24]])})))()},open:function(){var e=this.$createElement;this.$notify({title:"提示",message:e("i",{style:"color: teal"},"该功能用于提取图片中的文字,可以提交PNG、JPG格式图片，限制文件大小5MB"),offset:50})}},mounted:function(){this.open()}},p=d,u=(a("ba25"),a("2877")),f=Object(u["a"])(p,i,n,!1,null,"4d411016",null);t["default"]=f.exports}}]);